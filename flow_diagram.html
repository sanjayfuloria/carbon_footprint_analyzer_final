<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carbon Footprint Analyzer - Flow Diagram</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .flow-container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        .flow-title {
            text-align: center;
            margin-bottom: 30px;
            color: #333;
        }
        
        .flow-title h2 {
            font-size: 1.8rem;
            color: #2e7d32;
        }
        
        .flow-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .node {
            background: linear-gradient(145deg, #f5f5f5, #e0e0e0);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            position: relative;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 3px solid transparent;
        }
        
        .node:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .node-number {
            position: absolute;
            top: -10px;
            left: -10px;
            width: 30px;
            height: 30px;
            background: #2e7d32;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
        }
        
        .node-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .node-title {
            font-weight: bold;
            font-size: 1rem;
            margin-bottom: 8px;
            color: #333;
        }
        
        .node-desc {
            font-size: 0.8rem;
            color: #666;
            line-height: 1.4;
        }
        
        .node-tech {
            margin-top: 10px;
            padding: 5px 10px;
            background: #e8f5e9;
            border-radius: 5px;
            font-size: 0.7rem;
            color: #2e7d32;
            font-weight: 500;
        }
        
        /* Node colors - Updated for 9 nodes */
        .node-1 { border-color: #2196f3; }
        .node-2 { border-color: #ff9800; }
        .node-3 { border-color: #e91e63; }
        .node-4 { border-color: #ff5722; }
        .node-5 { border-color: #4caf50; }
        .node-6 { border-color: #9c27b0; }
        .node-7 { border-color: #00bcd4; }
        .node-8 { border-color: #ffc107; }
        .node-9 { border-color: #795548; }
        
        .node-1 .node-number { background: #2196f3; }
        .node-2 .node-number { background: #ff9800; }
        .node-3 .node-number { background: #e91e63; }
        .node-4 .node-number { background: #ff5722; }
        .node-5 .node-number { background: #4caf50; }
        .node-6 .node-number { background: #9c27b0; }
        .node-7 .node-number { background: #00bcd4; }
        .node-8 .node-number { background: #ffc107; }
        .node-9 .node-number { background: #795548; }
        
        .arrow-row {
            display: flex;
            justify-content: center;
            margin: 10px 0;
        }
        
        .arrow {
            font-size: 2rem;
            color: #2e7d32;
        }
        
        /* High-value transaction section */
        .high-value-section {
            margin-top: 40px;
            padding-top: 30px;
            border-top: 3px solid #ff5722;
            background: linear-gradient(145deg, #fff3e0, #ffe0b2);
            border-radius: 15px;
            padding: 30px;
        }
        
        .high-value-title {
            text-align: center;
            margin-bottom: 25px;
            color: #333;
        }
        
        .high-value-title h3 {
            font-size: 1.5rem;
            color: #ff5722;
            margin-bottom: 5px;
        }
        
        .high-value-flow {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
        }
        
        .high-value-node {
            background: linear-gradient(145deg, #ffebee, #ffcdd2);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 2px solid #ff5722;
            position: relative;
        }
        
        .high-value-node .node-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .high-value-node .node-title {
            font-weight: bold;
            font-size: 0.9rem;
            margin-bottom: 8px;
            color: #d32f2f;
        }
        
        .high-value-node .node-desc {
            font-size: 0.75rem;
            color: #666;
            line-height: 1.3;
            margin-bottom: 8px;
        }
        
        .node-recommendation {
            margin-top: 8px;
            padding: 4px 8px;
            background: #ff5722;
            color: white;
            border-radius: 4px;
            font-size: 0.65rem;
            font-weight: 500;
        }
        
        .categories-section {
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px dashed #e0e0e0;
        }
        
        .categories-title {
            text-align: center;
            margin-bottom: 20px;
            color: #333;
        }
        
        .categories-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 15px;
        }
        
        .category-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            border-left: 4px solid #2e7d32;
        }
        
        .category-icon {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }
        
        .category-name {
            font-size: 0.75rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }
        
        .category-factor {
            font-size: 0.65rem;
            color: #666;
        }
        
        .features-section {
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px dashed #e0e0e0;
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
        }
        
        .feature-card {
            background: linear-gradient(145deg, #e8f5e9, #c8e6c9);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }
        
        .feature-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .feature-title {
            font-weight: bold;
            margin-bottom: 5px;
            color: #2e7d32;
        }
        
        .feature-desc {
            font-size: 0.8rem;
            color: #555;
        }
        
        .footer {
            text-align: center;
            margin-top: 30px;
            color: white;
            opacity: 0.8;
        }
        
        @media (max-width: 1200px) {
            .flow-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            .categories-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            .features-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            .high-value-flow {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .flow-grid {
                grid-template-columns: 1fr;
            }
            .categories-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            .features-grid {
                grid-template-columns: 1fr;
            }
            .high-value-flow {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üå± Carbon Footprint Analyzer</h1>
            <p>AI-powered carbon footprint estimation from Indian bank statements using LangGraph</p>
        </div>
        
        <div class="flow-container">
            <div class="flow-title">
                <h2>9-Node Processing Pipeline</h2>
            </div>
            
            <!-- First Row: Nodes 1-4 -->
            <div class="flow-grid">
                <div class="node node-1">
                    <div class="node-number">1</div>
                    <div class="node-icon">üìÑ</div>
                    <div class="node-title">PDF Parser</div>
                    <div class="node-desc">Extract raw text from bank statement PDF</div>
                    <div class="node-tech">PyMuPDF</div>
                </div>
                
                <div class="node node-2">
                    <div class="node-number">2</div>
                    <div class="node-icon">üîç</div>
                    <div class="node-title">Extract Transactions</div>
                    <div class="node-desc">LLM parses text into structured transactions</div>
                    <div class="node-tech">Groq llama-3.3-70b</div>
                </div>
                
                <div class="node node-3">
                    <div class="node-number">3</div>
                    <div class="node-icon">üîí</div>
                    <div class="node-title">Redact PII</div>
                    <div class="node-desc">Remove mobile, UPI, account numbers</div>
                    <div class="node-tech">Regex Patterns</div>
                </div>
                
                <div class="node node-4">
                    <div class="node-number">4</div>
                    <div class="node-icon">üí∞</div>
                    <div class="node-title">Filter High-Value</div>
                    <div class="node-desc">Exclude transactions ‚â•‚Çπ50,000 from spend-based analysis</div>
                    <div class="node-tech">Threshold Filter</div>
                </div>
            </div>
            
            <div class="arrow-row">
                <span class="arrow">‚¨áÔ∏è</span>
            </div>
            
            <!-- Second Row: Nodes 5-8 -->
            <div class="flow-grid">
                <div class="node node-5">
                    <div class="node-number">5</div>
                    <div class="node-icon">üè∑Ô∏è</div>
                    <div class="node-title">Rule Categorize</div>
                    <div class="node-desc">Pattern-match 80% of regular transactions</div>
                    <div class="node-tech">200+ Patterns</div>
                </div>
                
                <div class="node node-6">
                    <div class="node-number">6</div>
                    <div class="node-icon">ü§ñ</div>
                    <div class="node-title">LLM Categorize</div>
                    <div class="node-desc">AI categorizes remaining 20%</div>
                    <div class="node-tech">Anthropic/Groq</div>
                </div>
                
                <div class="node node-7">
                    <div class="node-number">7</div>
                    <div class="node-icon">üåç</div>
                    <div class="node-title">Estimate Carbon</div>
                    <div class="node-desc">Calculate CO2e using emission factors</div>
                    <div class="node-tech">NSSO Data</div>
                </div>
                
                <div class="node node-8">
                    <div class="node-number">8</div>
                    <div class="node-icon">üìä</div>
                    <div class="node-title">Aggregate Results</div>
                    <div class="node-desc">Sum totals by category & week</div>
                    <div class="node-tech">Data Processing</div>
                </div>
            </div>
            
            <div class="arrow-row">
                <span class="arrow">‚¨áÔ∏è</span>
            </div>
            
            <!-- Third Row: Node 9 -->
            <div class="flow-grid" style="grid-template-columns: 1fr 1fr 1fr 1fr;">
                <div></div>
                <div class="node node-9">
                    <div class="node-number">9</div>
                    <div class="node-icon">üí°</div>
                    <div class="node-title">Generate Insights</div>
                    <div class="node-desc">AI-powered recommendations & timeline analysis</div>
                    <div class="node-tech">LLM Analysis</div>
                </div>
                <div></div>
                <div></div>
            </div>
            
            <!-- High-Value Branch -->
            <div class="high-value-section">
                <div class="high-value-title">
                    <h3>‚ö†Ô∏è High-Value Transaction Path (‚â•‚Çπ50,000)</h3>
                    <p style="font-size: 0.8rem; color: #666; margin-top: 5px;">Excluded from spend-based analysis - requires activity-based estimation</p>
                </div>
                
                <div class="high-value-flow">
                    <div class="high-value-node">
                        <div class="node-icon">üíª</div>
                        <div class="node-title">Electronics</div>
                        <div class="node-desc">‚Çπ50K laptop ‚Üí ~300-400 kg CO2e</div>
                        <div class="node-recommendation">Use product LCA data</div>
                    </div>
                    
                    <div class="high-value-node">
                        <div class="node-icon">‚úàÔ∏è</div>
                        <div class="node-title">Travel</div>
                        <div class="node-desc">‚Çπ75K flight ‚Üí Distance-based calculation</div>
                        <div class="node-recommendation">Use flight emission calculators</div>
                    </div>
                    
                    <div class="high-value-node">
                        <div class="node-icon">üè†</div>
                        <div class="node-title">Property/Vehicles</div>
                        <div class="node-desc">Large purchases ‚Üí Lifecycle emissions</div>
                        <div class="node-recommendation">Use activity-based factors</div>
                    </div>
                    
                    <div class="high-value-node">
                        <div class="node-icon">üí∞</div>
                        <div class="node-title">Investments</div>
                        <div class="node-desc">Financial products ‚Üí No direct emissions</div>
                        <div class="node-recommendation">Exclude from carbon analysis</div>
                    </div>
                </div>
            </div>
            
            <!-- Categories Section -->
            <div class="categories-section">
                <div class="categories-title">
                    <h3>üìã 10 Official Spending Categories</h3>
                    <p style="font-size: 0.8rem; color: #666; margin-top: 5px;">Based on NSSO consumption data with India-specific emission factors</p>
                </div>
                
                <div class="categories-grid">
                    <div class="category-card">
                        <div class="category-icon">üçΩÔ∏è</div>
                        <div class="category-name">Food & Groceries</div>
                        <div class="category-factor">7-15 kg CO2e/‚Çπ1000</div>
                    </div>
                    
                    <div class="category-card">
                        <div class="category-icon">üè†</div>
                        <div class="category-name">Housing & Utilities</div>
                        <div class="category-factor">10-20 kg CO2e/‚Çπ1000</div>
                    </div>
                    
                    <div class="category-card">
                        <div class="category-icon">üöó</div>
                        <div class="category-name">Transport</div>
                        <div class="category-factor">20-40 kg CO2e/‚Çπ1000</div>
                    </div>
                    
                    <div class="category-card">
                        <div class="category-icon">üëï</div>
                        <div class="category-name">Clothing & Footwear</div>
                        <div class="category-factor">5-10 kg CO2e/‚Çπ1000</div>
                    </div>
                    
                    <div class="category-card">
                        <div class="category-icon">üè†</div>
                        <div class="category-name">Household Goods</div>
                        <div class="category-factor">5-10 kg CO2e/‚Çπ1000</div>
                    </div>
                    
                    <div class="category-card">
                        <div class="category-icon">üíä</div>
                        <div class="category-name">Healthcare</div>
                        <div class="category-factor">3-7 kg CO2e/‚Çπ1000</div>
                    </div>
                    
                    <div class="category-card">
                        <div class="category-icon">üìö</div>
                        <div class="category-name">Education & Comm</div>
                        <div class="category-factor">1-5 kg CO2e/‚Çπ1000</div>
                    </div>
                    
                    <div class="category-card">
                        <div class="category-icon">üé¨</div>
                        <div class="category-name">Recreation</div>
                        <div class="category-factor">2-8 kg CO2e/‚Çπ1000</div>
                    </div>
                    
                    <div class="category-card">
                        <div class="category-icon">üí∞</div>
                        <div class="category-name">Financial Services</div>
                        <div class="category-factor">1-3 kg CO2e/‚Çπ1000</div>
                    </div>
                    
                    <div class="category-card">
                        <div class="category-icon">üì¶</div>
                        <div class="category-name">Miscellaneous</div>
                        <div class="category-factor">2-6 kg CO2e/‚Çπ1000</div>
                    </div>
                </div>
            </div>
            
            <!-- Features Section -->
            <div class="features-section">
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">üîí</div>
                        <div class="feature-title">Privacy-First</div>
                        <div class="feature-desc">PII redacted before LLM processing (DPDP Act compliant)</div>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">üí∞</div>
                        <div class="feature-title">High-Value Filtering</div>
                        <div class="feature-desc">Transactions ‚â•‚Çπ50K excluded from spend-based analysis</div>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">‚ö°</div>
                        <div class="feature-title">Hybrid Efficiency</div>
                        <div class="feature-desc">80% rule-based + 20% LLM for speed & cost</div>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">üìà</div>
                        <div class="feature-title">Timeline Analysis</div>
                        <div class="feature-desc">Weekly trends vs urban India baseline (8.5 kg CO2e/week)</div>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">üáÆüá≥</div>
                        <div class="feature-title">India-Specific</div>
                        <div class="feature-desc">NSSO emission factors, all major banks supported</div>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">üìä</div>
                        <div class="feature-title">Min/Max Ranges</div>
                        <div class="feature-desc">Accounts for diet, energy sources, lifestyle</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>Built with LangGraph ‚Ä¢ 9-Node Pipeline ‚Ä¢ High-Value Filtering ‚Ä¢ Timeline Analysis ‚Ä¢ Powered by Groq & Anthropic</p>
        </div>
    </div>
</body>
</html>





